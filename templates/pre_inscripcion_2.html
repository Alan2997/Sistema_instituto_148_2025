<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Inscripción - Parte 2</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script>
        function toggleLaborFields() {
            const trabajaSi = document.getElementById('trabaja_si');
            const trabajaNo = document.getElementById('trabaja_no');
            const laborFields = document.querySelectorAll('.labor-field');

            if (trabajaSi.checked) {
                laborFields.forEach(field => field.disabled = false);
            } else {
                laborFields.forEach(field => field.disabled = true);
                laborFields.forEach(field => field.value = '');
            }
        }

        window.onload = function() {
            toggleLaborFields();
        };
    </script>
</head>
<body>
    <div class="container">
        {% include 'navbar.html' %}
        
        <div class="form-container">
            <!-- Sección de Estudios Cursados -->
            <div class="form-section">
                <h2>Estudios Cursados</h2>
                <form method="POST" action="/pre_inscripcion_3">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="titulo_base">Título Base:</label>
                            <input type="text" id="titulo_base" name="titulo_base" required>
                        </div>
                        <div class="form-group">
                            <label for="anio_egreso">Año de Egreso:</label>
                            <input type="number" id="anio_egreso" name="anio_egreso" required>
                        </div>
                        <!-- Aquí controlamos la provincia si es Argentina -->
                        <div class="form-group">
                            <label for="provincia_estudio_otros">Provincia (Solo si los otros estudios fueron en Argentina):</label>
                            <select id="provincia_estudio_otros" name="provincia_estudio_otros" disabled>
                                <option value="">Seleccione una provincia</option>
                                {% for provincia in provincias %}
                                    <option value="{{ provincia[0] }}" data-pais="{{ provincia[1] }}">{{ provincia[2] }}</option>
                                {% endfor %}
                            </select>
                            <span id="mensaje-provincia" style="display: none; color: red;">*Seleccione una provincia solo si estudió en Argentina.</span>
                        </div>
                        <div class="form-group">
                            <label for="id_institucion">Institución:</label>
                            <input type="number" id="id_institucion" name="id_institucion" required>
                        </div>
                        <div class="form-group">
                            <label for="otros_estudios">Otros Estudios:</label>
                            <input type="text" id="otros_estudios" name="otros_estudios">
                        </div>
                        <div class="form-group">
                            <label for="anio_egreso_otros">Año de Egreso (Otros Estudios):</label>
                            <input type="number" id="anio_egreso_otros" name="anio_egreso_otros">
                        </div>
                    </div>
            </div>

            <!-- Sección de Datos Laborales -->
            <div class="form-section">
                <h2>Datos Laborales</h2>
                <div class="form-row">
                    <div class="form-radio">
                        <label>¿Trabaja?</label>
                        <input type="radio" id="trabaja_si" name="trabaja" value="si" onclick="toggleLaborFields()">
                        <label for="trabaja_si">Sí</label>
                        <input type="radio" id="trabaja_no" name="trabaja" value="no" onclick="toggleLaborFields()" checked>
                        <label for="trabaja_no">No</label>
                    </div>
                    <div class="form-group">
                        <label for="actividad">Actividad:</label>
                        <input type="text" id="actividad" name="actividad" class="labor-field" disabled>
                    </div>
                    <div class="form-group">
                        <label for="horario_habitual">Horario Habitual:</label>
                        <input type="text" id="horario_habitual" name="horario_habitual" class="labor-field" disabled>
                    </div>
                    <div class="form-group">
                        <label for="obra_social">Obra Social:</label>
                        <input type="text" id="obra_social" name="obra_social" class="labor-field" disabled>
                    </div>
                </div>
            </div>
            
            <div class="actions">
                <button type="submit">Siguiente</button>
            </div>
            <div class="btn btn-secondary">
                <button type="submit" formaction="{{ url_for('pre_inscripcion') }}">
                    Atrás
                </button>
            </div>
        </form>
        </div>
    </div>
    <script>
        // Si el alumno ya seleccionó Argentina en los otros estudios
        function toggleProvinciaOtros() {
        const provinciaSelectOtros = document.getElementById('provincia_estudio_otros');
        const mensajeProvincia = document.getElementById('mensaje-provincia');

        const paisEstudiosAnteriores = {{ id_pais_estudio }}; // ID del país previamente seleccionado, este valor viene de la base de datos.

        if (paisEstudiosAnteriores === 1) { // Si '1' es el ID de Argentina
            provinciaSelectOtros.disabled = false;
            mensajeProvincia.style.display = 'block';
        } else {
            provinciaSelectOtros.disabled = true;
            provinciaSelectOtros.value = ''; // Limpiar la selección si no es Argentina
            mensajeProvincia.style.display = 'none';
        }
    }

    // Ejecutar al cargar la página
    window.onload = function() {
        toggleProvinciaOtros();
    };
    </script>
</body>
</html>
